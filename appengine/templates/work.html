{% extends "base.html" %}
{% set css_name = "css/model.css" %}
{% block content %}

    <div class = "results"></div>
    <script>
      var result = "";
      var parameters = location.search.substring(1);

      var temp = parameters.split("=");
      name = decodeURI(temp[1]);
      result = "<h1>" + name + "</h1>";

      var iframe = document.createElement('iframe');
      iframe.id = 'iframe';
      iframe.style.display = 'none';
      document.body.appendChild(iframe);
      iframe.src = 'static/JSONs/works.json';

      var json;

      setTimeout(function() {
        var works = document.getElementById('iframe').contentDocument.body.firstChild.innerHTML;
        json = JSON.parse(works);

        for (var key in json) {
          var val = json[key];
          for(var key2 in val) {
            var obj = val[key2];
            if(obj.name === name) {
              result += "<a href=artist?name=" + encodeURI(obj.artist) + ">" + obj.artist + "</a><br>";
              result += "<a href=type?name=" + encodeURI(obj.type) + ">" + obj.type + "</a><br>";
              result += obj.culture + "<br>";
              result += obj.date + "<br>";
              result += "<a href=venue?name=" + encodeURI(obj.location) + ">" + obj.location + "</a><br>";
              result += "<img src=" + obj.primaryimageurl + "><br><br>";
            }
          }
        }
        document.querySelector('.results').innerHTML = result;
      }, 500);
    </script>

{% endblock %}
